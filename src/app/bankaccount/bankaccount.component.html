<div class="main-content">

  <div class="header">
    <p>Bank Accounts</p>
  </div>

  <div class="dash">
    <div style="background: #ECECEC;">
      <div [nzGutter]="8" nz-row>
        <div [nzSpan]="8" nz-col>
          <nz-card nzTitle="Total Accounts">
            <p>{{ totalAccounts | number }}</p>
          </nz-card>
        </div>
      </div>
    </div>
  </div>

  <div class="filter">
    <input (ngModelChange)="search()" [(ngModel)]="searchValue" nz-input placeholder="Search..." type="text"/>
    <button (click)="openDrawer()" nz-button nzType="primary">New Account</button>
  </div>

  <div class="table-container">
    <div class="table-scroll">
      <nz-table #nzTable
                [nzData]="listOfDisplayData"
                [nzScroll]="{ x: '800px', y: '280px'}"
                nzTableLayout="fixed">
        <thead>
        <tr>
          <th>Account Number</th>
          <th>Account Holder</th>
          <th>Balance</th>
          <th>Credit Limit</th>
          <th>Opening Date</th>
          <th>Created At</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let account of listOfDisplayData">
          <td>{{ account.accountNumber }}</td>
          <td>{{ account.accountHolder }}</td>
          <td>{{ account.balance | number:'1.2-2' }}</td>
          <td>{{ account.creditLimit | number:'1.2-2' }}</td>
          <td>{{ account.openingDate | date: 'dd/MM/yyyy' }}</td>
          <td>{{ account.createdAt | date: 'dd/MM/yyyy - HH:mm' }}</td>
          <td>
            <button (click)="deleteBankAccount(account)" nz-button nzDanger nzSize="small" nzType="link">
              <nz-icon nzType="delete" nzTheme="outline"></nz-icon>
            </button>
            <button (click)="editBankAccount(account)" nz-button nzSize="small" nzType="link">
              <nz-icon nzType="edit" nzTheme="outline"></nz-icon>
            </button>
          </td>
        </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>

<!-- Drawer -->
<nz-drawer
  (nzOnClose)="closeDrawer()"
  [nzBodyStyle]="{ overflow: 'auto' }"
  [nzFooter]="drawerFooter"
  [nzTitle]="drawerTitle"
  [nzVisible]="isDrawerVisible"
  [nzWidth]="480">
  <form *nzDrawerContent [formGroup]="bankAccountForm" nz-form>
    <nz-form-item>
      <nz-form-label nzFor="accountNumber" nzRequired>Account Number</nz-form-label>
      <nz-form-control>
        <input formControlName="accountNumber" id="accountNumber" nz-input placeholder="Account Number"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="accountHolder" nzRequired>Account Holder</nz-form-label>
      <nz-form-control>
        <input formControlName="accountHolder" id="accountHolder" nz-input placeholder="Account Holder"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="balance" nzRequired>Balance</nz-form-label>
      <nz-form-control>
        <input formControlName="balance" id="balance" nz-input type="number"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="creditLimit" nzRequired>Credit Limit</nz-form-label>
      <nz-form-control>
        <input formControlName="creditLimit" id="creditLimit" nz-input type="number"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="openingDate" nzRequired>Opening Date</nz-form-label>
      <nz-form-control>
        <input formControlName="openingDate" id="openingDate" nz-input type="date"/>
      </nz-form-control>
    </nz-form-item>
  </form>

  <ng-template #drawerFooter>
    <button (click)="closeDrawer()" nz-button>Cancel</button>
    <button (click)="submitBankAccount()" [disabled]="!bankAccountForm.valid" nz-button nzType="primary">Save</button>
  </ng-template>
</nz-drawer>

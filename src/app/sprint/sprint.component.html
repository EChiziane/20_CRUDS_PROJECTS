<div class="main-content">
  <div class="header">
    <p>Lista de Sprints</p>
  </div>
  <div class="dash">
    <div style="background: #ECECEC; padding:30px;">
      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="8">
          <nz-card nzTitle="Total Sprints">
            <p>{{ totalSprints | number }}</p>
          </nz-card>
        </div>
      </div>
    </div>
  </div>

  <div class="filter">
    <input [(ngModel)]="searchValue" (ngModelChange)="search()" nz-input placeholder="Search..." type="text" />
    <button (click)="openSprintDrawer()" nz-button nzType="primary">Novo Sprint</button>
  </div>

  <div class="table-container">
    <div class="table-scroll">
      <nz-table
        [nzData]="listOfDisplayData"
        [nzFrontPagination]="false"
        [nzScroll]="{ y: '280px' }"
        nzTableLayout="fixed"
      >
        <thead>
        <tr>
          <th>Código</th>
          <th>Descrição</th>
          <th>Ações</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let sprint of listOfDisplayData">
          <td>{{ sprint.code }}</td>
          <td>{{ sprint.descricao }}</td>
          <td>
            <button
              (click)="deleteSprint(sprint)"
              nz-button
              nzType="link"
              nzSize="small"
              nzDanger
              title="Excluir Sprint"
            >
              <nz-icon nzType="delete" nzTheme="outline"></nz-icon>
            </button>
          </td>
        </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>

<!-- Sprint Drawer -->
<nz-drawer
  [nzVisible]="isSprintDrawerVisible"
  [nzWidth]="480"
  nzTitle="Novo Sprint"
  (nzOnClose)="closeSprintDrawer()"
  [nzFooter]="nzSprintDrawerFooter"
>
  <form *nzDrawerContent [formGroup]="sprintForm" nz-form>
    <nz-form-item>
      <nz-form-label nzFor="code" nzRequired>Código</nz-form-label>
      <nz-form-control>
        <input formControlName="code" nz-input id="code" placeholder="Código do sprint" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="descricao" nzRequired>Descrição</nz-form-label>
      <nz-form-control>
        <input formControlName="descricao" nz-input id="descricao" placeholder="Descrição do sprint" />
      </nz-form-control>
    </nz-form-item>
  </form>

  <ng-template #nzSprintDrawerFooter>
    <button nz-button (click)="closeSprintDrawer()">Cancelar</button>
    <button nz-button nzType="primary" [disabled]="!sprintForm.valid" (click)="submitSprint()">Salvar</button>
  </ng-template>
</nz-drawer>

<div class="main-content">

  <div class="header">
    <p>Product List</p>
  </div>

  <div class="filter">
    <input (ngModelChange)="search()" [(ngModel)]="searchValue" nz-input placeholder="Search..." type="text"/>
    <button (click)="openDrawer()" nz-button nzType="primary">New Product</button>
  </div>

  <div class="table-container">
    <nz-table [nzData]="productList" [nzScroll]="{ x: '800px', y: '280px'}" nzTableLayout="fixed">
      <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Category</th>
        <th>Created At</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let product of productList">
        <td>{{ product.name }}</td>
        <td>{{ product.description }}</td>
        <td>{{ product.price | currency }}</td>
        <td>{{ product.stockQuantity }}</td>
        <td>{{ product.category }}</td>
        <td>{{ product.createdAt | date: 'dd/MM/yyyy HH:mm' }}</td>
        <td>
          <button (click)="editProduct(product)" nz-button nzSize="small" nzType="link">
            <nz-icon nzType="edit" nzTheme="outline"></nz-icon>
          </button>
          <button (click)="deleteProduct(product)" nz-button nzDanger nzSize="small" nzType="link">
            <nz-icon nzType="delete" nzTheme="outline"></nz-icon>
          </button>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </div>
</div>

<!-- Drawer -->
<nz-drawer
  (nzOnClose)="closeDrawer()"
  [nzFooter]="nzDrawerFooter"
  [nzTitle]="drawerTitle"
  [nzVisible]="isDrawerVisible"
  [nzWidth]="480"

>
  <form *nzDrawerContent [formGroup]="productForm" nz-form>
    <nz-form-item>
      <nz-form-label nzFor="name" nzRequired>Name</nz-form-label>
      <nz-form-control>
        <input formControlName="name" id="name" nz-input placeholder="Product Name"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="description" nzRequired>Description</nz-form-label>
      <nz-form-control>
        <input formControlName="description" id="description" nz-input placeholder="Product Description"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="price" nzRequired>Price</nz-form-label>
      <nz-form-control>
        <input type="number" formControlName="price" id="price" nz-input placeholder="Price"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="stockQuantity" nzRequired>Stock</nz-form-label>
      <nz-form-control>
        <input type="number" formControlName="stockQuantity" id="stockQuantity" nz-input placeholder="Stock Quantity"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="category" nzRequired>Category</nz-form-label>
      <nz-form-control>
        <input formControlName="category" id="category" nz-input placeholder="Category"/>
      </nz-form-control>
    </nz-form-item>
  </form>

  <ng-template #nzDrawerFooter>
    <button (click)="closeDrawer()" nz-button>Cancel</button>
    <button (click)="submitProduct()" [disabled]="!productForm.valid" nz-button nzType="primary">Save</button>
  </ng-template>
</nz-drawer>

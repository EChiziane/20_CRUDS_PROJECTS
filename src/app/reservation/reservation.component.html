<div class="main-content">

  <div class="header">
    <p>Reservations List</p>
  </div>

  <div class="filter">
    <input (ngModelChange)="search()" [(ngModel)]="searchValue" nz-input placeholder="Search..." type="text"/>
    <button (click)="openDrawer()" nz-button nzType="primary">New Reservation</button>
  </div>

  <div class="table-container">
    <div class="table-scroll">
      <nz-table #nzTable
                [nzData]="listOfReservations"
                [nzScroll]="{ x: '800px', y: '280px'}"
                nzTableLayout="fixed"
      >
        <thead>
        <tr>
          <th>Guest Name</th>
          <th>Check-In</th>
          <th>Check-Out</th>
          <th>Room</th>
          <th>Total Price</th>
          <th>Created At</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let reservation of listOfReservations">
          <td>{{ reservation.guestName }}</td>
          <td>{{ reservation.checkInDate | date: 'dd/MM/yyyy' }}</td>
          <td>{{ reservation.checkOutDate | date: 'dd/MM/yyyy' }}</td>
          <td>{{ reservation.roomNumber }}</td>
          <td>{{ reservation.totalPrice | currency }}</td>
          <td>{{ reservation.createdAt | date: 'dd/MM/yyyy - HH:mm' }}</td>
          <td>
            <button (click)="editReservation(reservation)" nz-button nzSize="small" nzType="link">
              <nz-icon nzTheme="outline" nzType="edit"></nz-icon>
            </button>
            <button (click)="deleteReservation(reservation)" nz-button nzDanger nzSize="small" nzType="link">
              <nz-icon nzTheme="outline" nzType="delete"></nz-icon>
            </button>
          </td>
        </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>

<!-- Drawer -->
<nz-drawer
  (nzOnClose)="closeDrawer()"
  [nzBodyStyle]="{ overflow: 'auto' }"
  [nzFooter]="nzDrawerFooter"
  [nzTitle]="drawerTitle"
  [nzVisible]="isDrawerVisible"
  [nzWidth]="480"
>
  <form *nzDrawerContent [formGroup]="reservationForm" nz-form>
    <nz-form-item>
      <nz-form-label nzFor="guestName" nzRequired>Guest Name</nz-form-label>
      <nz-form-control>
        <input formControlName="guestName" id="guestName" nz-input placeholder="Enter guest name"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="checkInDate" nzRequired>Check-In Date</nz-form-label>
      <nz-form-control>
        <input type="date" formControlName="checkInDate" id="checkInDate" nz-input/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="checkOutDate" nzRequired>Check-Out Date</nz-form-label>
      <nz-form-control>
        <input type="date" formControlName="checkOutDate" id="checkOutDate" nz-input/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="roomNumber" nzRequired>Room Number</nz-form-label>
      <nz-form-control>
        <input type="number" formControlName="roomNumber" id="roomNumber" nz-input/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="totalPrice" nzRequired>Total Price</nz-form-label>
      <nz-form-control>
        <input type="number" formControlName="totalPrice" id="totalPrice" nz-input/>
      </nz-form-control>
    </nz-form-item>
  </form>

  <ng-template #nzDrawerFooter>
    <button (click)="closeDrawer()" nz-button>Cancel</button>
    <button (click)="submitReservation()" [disabled]="!reservationForm.valid" nz-button nzType="primary">Save</button>
  </ng-template>
</nz-drawer>
